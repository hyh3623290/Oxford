[toc]



# 浏览器渲染引擎

​	网络资源 -> 浏览器 -> 前端界面

​	中间这个“渲染引擎处理”目前对大家来说仍然是一个黑盒。我们把这个黑盒拆开，会看到它其实包含了以下几个具体流程：

**资源文件 -> HTML解析 -> CSS解析 -> 样式与结构合并 -> 布局阶段 -> 页面绘制**

- 在这一步浏览器对HTML文档进行解析，并在解析 HTML 的过程中发出了页面渲染所需的各种外部资源请求。
- 浏览器将识别并加载所有的 CSS 样式信息。
- 将样式信息和文档结构合并，最终生成页面 render 树（:after :before 这样的伪元素会在这个环节被构建到 DOM 树中）。
- 页面中所有元素的相对位置信息，大小等信息均在这一步得到计算。
- 在这一步中浏览器会根据我们前面处理出来的结果，把每一个页面图层转换为像素，并对所有的媒体文件进行解码。



# 页面加载过程

*   浏览器根据 DNS 服务器得到域名的 IP 地址
*   向这个 IP 的机器发送 HTTP 请求
*   服务器收到、处理并返回 HTTP 请求
*   浏览器得到返回内容（其实就是一堆 HMTL 格式的字符串）



# 渲染过程

*   根据 HTML 结构转化成 DOM 树
*   根据 CSS 生成 CSSOM
*   将 DOM 和 CSSOM 整合形成 RenderTree
*   根据 RenderTree 开始渲染和展示
*   遇到`<script>`时，会执行并阻塞渲染

​    解析过程中，如果遇到`<link href="...">`和`<script src="...">`这种外链加载 CSS 和 JS 的标签，浏览器会异步下载，下载过程和上文中下载 HTML 的流程一样。只不过，这里下载下来的字符串是 CSS 或者 JS 格式的。

​	另外，这里也可以解释一个问题 —— **为何要将 CSS 放在 HTML 头部？**—— 这样会让浏览器尽早拿到 CSS 尽早生成 CSSOM，然后在解析 HTML 之后可一次性生成最终的 RenderTree，渲染一次即可。如果 CSS 放在 HTML 底部，会出现渲染卡顿的情况，影响性能和体验。





# 性能优化

## 原则

性能优化的原则是**以更好的用户体验为标准**，具体就是实现下面的目标：

1.  多使用内存、缓存或者其他方法
2.  减少 CPU 和GPU 计算，更快展现



## 方向

优化的方向有两个：

1. 减少页面体积，提升网络加载
2. 优化页面渲染

**减少页面体积，提升网络加载**

*   静态资源的压缩合并（JS 代码压缩合并、CSS 代码压缩合并、雪碧图）
*   静态资源缓存（资源名称加 MD5 戳）
*   使用 CDN 让资源加载更快



**优化页面渲染**

*   CSS 放前面，JS 放后面
*   懒加载（图片懒加载、下拉加载更多）
*   减少DOM 查询，对 DOM 查询做缓存
*   减少DOM 操作，多个操作尽量合并在一起执行（`DocumentFragment`）
*   事件节流
*   尽早执行操作（`DOMContentLoaded`）
*   使用 SSR 后端渲染，数据直接输出到 HTML 中，减少浏览器使用 JS 模板渲染页面 HTML 的时间





## 解释

​	CDN 会提供专业的加载优化方案，静态资源要尽量放在 CDN 上。例如：	

```jsx
<script src="https://cdn.bootcss.com/zepto/1.0rc1/zepto.min.js"></script>
```

​	

​	SSR 后端渲染可一次性输出 HTML 内容，不用在页面渲染完成之后，再通过 Ajax 加载数据、再渲染。例如使用 smarty、Vue SSR 等。



​	一开始先给为 `src` 赋值成一个通用的预览图，下拉时候再动态赋值成正式的图片。如下，`preview.png`是预览图片，比较小，加载很快，而且很多图片都共用这个`preview.png`，加载一次即可。待页面下拉，图片显示出来时，再去替换`src`为`data-realsrc`的值。

```js
<img src="preview.png" data-realsrc="abc.png"/>
```





# Web安全

未看





# Git

```js
// 将自己分支的内容合并到master分支，然后提交到远程服务器
git checkout master
git merge <branchname>
git push origin master
```









































# 参考文献

- 掘金 - Web 前端面试指南与高频考题解析
- 幕客 - 解锁前端面试体系核心攻略